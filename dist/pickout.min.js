var pickout=function(){"use strict";function e(e){t(e),a()}function t(e){var t="object"==typeof e?e:{};"string"==typeof e&&(t.el=e),t.DOM=C.$$(t.el),h(t)}function a(){v.DOM.map(function(e,t){n(e,t)}),u()}function n(e,t){var a=v,n=!1;e.style.display="none",e.hasAttribute("multiple")&&(n=!0,e.name=-1!==e.name.indexOf("[]")?e.name:e.name+"[]");var l=e.parentElement;C.attr(l,"style","position:relative;float:left;");var i=C.attr(e,"placeholder"),d=C.create("div");if(C.addClass(d,"pk-field -"+a.theme+(n?" -multiple":"")),i&&(d.innerHTML=i),l.hasAttribute("for")&&C.attr(d,"id",C.attr(l,"for")),l.appendChild(d),!n){var o=C.create("span");C.addClass(o,"pk-arrow -"+a.theme),l.appendChild(o)}C.events(l,"click",function(e){e.preventDefault(),e.stopPropagation(),a.currentIndex=t,a.multiple=!!n,r(a)})}function r(e){var t,a=C.$(".pk-modal"),n=e.DOM[e.currentIndex],r=C.$(".main",a);if(C.addClass(a,"-"+e.theme),!r.children.length){var l=C.$(".pk-overlay"),d=C.toArray(n),o=d.map(function(n,r){return t={index:r,item:n},"optgroup"===n.parentElement.localName&&(t.optGroup=n.parentElement),i(t,a,e)});C.addClass(a,"-show"),C.addClass(l,"-show");var s=n.hasAttribute("placeholder")?C.attr(n,"placeholder"):"Select to option";if(C.$(".head",a).innerHTML=s,C.rmClass(a,"-multiple"),e.multiple){var p=C.$(".pk-multiple",a);C.addClass(p,"-show"),C.addClass(p,"-"+e.theme),C.addClass(a,"-multiple")}if(e.search){var c=C.$(".pk-search",a),u=C.$("input",c);u.value="",setTimeout(function(){u.focus()},300),C.addClass(c,"-show");var f=[];C.events(u,"keyup",function(t){function a(){var e=C.$(".pk-no_result_search",r);e&&r.removeChild(e)}function n(e){e.map(function(e){e.parentNode&&r.removeChild(e)})}if(t.preventDefault(),t.stopPropagation(),f=C.$$("li",r),n(f),!t.target.value)return a(),void o.map(function(e){Array.isArray(e)&&(r.appendChild(e[0]),e=e[1]),r.appendChild(e)});if(o.map(function(e){Array.isArray(e)&&(e=e[1]);var n=e.lastChild;n&&-1!==n.innerHTML.toLowerCase().indexOf(t.target.value.toLowerCase())&&(a(),r.appendChild(e))}),!r.children.length){var l=C.create("li");return C.addClass(l,"pk-no_result_search"),l.innerHTML=e.noResults,void r.appendChild(l)}})}}}function l(e,t,a){var n=C.create("li");return C.addClass(n,"pk-option-group -"+a.theme),C.attr(n,"data-opt-group",e.label),C.attr(n,"data-type",e.localName),n.innerHTML=e.label.toUpperCase(),t.appendChild(n),n}function i(e,t,a){var n=a.DOM[a.currentIndex],r=t.querySelector(".main"),i=[];if(e.optGroup){var s=C.$("li[data-opt-group="+e.optGroup.label+"]",r);s||i.push(l(e.optGroup,r,a))}var p=C.create("li"),c=e.item.selected?"-selected":"";if(C.addClass(p,"pk-option "+c+" -"+a.theme),a.multiple){var u=C.create("span");C.addClass(u,"pk-circle -"+a.theme),p.appendChild(u)}e.item.value||C.attr(p,"style","display:none;");var f=C.create("span");C.addClass(f,"icon"),f.innerHTML=C.attr(e.item,"data-icon")||"";var h=C.create("span");return C.addClass(h,"txt"),h.innerHTML=e.item.innerHTML,r.appendChild(p),p.appendChild(f),p.appendChild(h),e.txt=h.innerHTML,C.events(p,"click",function(t){if(t.preventDefault(),t.stopPropagation(),a.multiple){if(e.field=n.parentElement.querySelector(".pk-field"),n[e.index].hasAttribute("selected")){n[e.index].removeAttribute("selected"),C.rmClass(p,"-selected");var r=C.$('.pk-tag[data-select="'+n.name.replace("[]","")+e.index+'"]');return e.field.removeChild(r),void(e.field.children.length||(e.field.innerHTML=C.attr(n,"placeholder")))}return C.attr(n[e.index],"selected","selected"),C.addClass(p,"-selected"),void d(n,e,a)}o(n,e)}),i.length?(i.push(p),i):p}function d(e,t,a){t.field.children.length||(t.field.innerHTML="");var n=C.create("div"),r=C.create("span"),l=C.create("span");C.addClass(n,"pk-tag -"+a.theme),C.attr(n,"data-select",e.name.replace("[]","")+t.index),C.addClass(r,"txt"),C.addClass(l,"close"),r.innerHTML=t.txt,l.innerHTML="&times;",n.appendChild(r),n.appendChild(l),t.field.appendChild(n);var i=t.index;C.events(l,"click",function(a){a.preventDefault(),a.stopPropagation(),e[i].removeAttribute("selected"),t.field.removeChild(a.target.parentElement),t.field.children.length||(t.field.innerHTML=C.attr(e,"placeholder"))})}function o(e,t,a){C.toArray(e).map(function(e,a){return a===t.index?void C.attr(e,"selected","selected"):void e.removeAttribute("selected")}),s(e,t.txt),f()}function s(e,t){e.parentElement.querySelector(".pk-field").innerHTML=t}function p(e){t(e),v.DOM.forEach(function(e){s(e,e[e.selectedIndex].innerHTML)})}function c(e){var a={};t(e),v.DOM.forEach(function(e){a.field=e.parentElement.querySelector(".pk-field"),C.toArray(e).forEach(function(t,n){t.hasAttribute("selected")&&(a.index=n,a.txt=t.innerHTML,d(e,a,v))})})}function u(){if(!C.$(".pk-overlay")){var e=C.create("div");C.addClass(e,"pk-overlay");var t=C.create("div");C.addClass(t,"pk-modal");var a=C.create("ul");C.addClass(a,"main");var n=C.create("div");C.addClass(n,"head");var r=C.create("div");C.addClass(r,"pk-search");var l=C.create("input");C.attr(l,"type","text");var i=C.create("div");C.addClass(i,"pk-multiple -"+v.theme);var d=C.create("button");C.addClass(d,"pk-btnMultiply -"+v.theme),d.innerHTML=v.txtBtnMultiple;var o=C.create("span");C.addClass(o,"close"),o.innerHTML="&times;",document.body.appendChild(e),document.body.appendChild(t),t.appendChild(n),t.appendChild(r),r.appendChild(l),t.appendChild(o),t.appendChild(a),t.appendChild(i),i.appendChild(d),[e,o,d].forEach(function(e){C.events(e,"click",function(e){e.preventDefault(),e.stopPropagation(),f()})})}}function f(){var e=C.$(".pk-overlay"),t=C.$(".pk-modal"),a=C.$(".pk-search",t),n=C.$(".pk-multiple",t);C.rmClass([e,t,a,n],"-show"),C.rmClass([t,a,n],"-clean"),setTimeout(function(){C.$(".main",t).innerHTML=""},500)}function h(e){v=JSON.parse(JSON.stringify(m));for(var t in e)e.hasOwnProperty(t)&&(v[t]=e[t])}var v={},m={theme:"clean",search:!1,noResults:"No Results",multiple:!1,txtBtnMultiple:"CONFIRM SELECTED"},C={create:function(e){return document.createElement(e)},attr:function(e,t,a){return a?void e.setAttribute(t,a):e.getAttribute(t)},events:function(e,t,a){e.addEventListener(t,a,!1)},toArray:function(e){return[].slice.call(e)},addClass:function(e,t){var a=this,n=a.attr(e,"class")?a.attr(e,"class"):"";a.attr(e,"class",n+" "+t)},rmClass:function(e,t){var a=this;return Array.isArray(e)?void e.forEach(function(e){a.attr(e,"class",a.attr(e,"class").replace(" "+t,""))}):void a.attr(e,"class",a.attr(e,"class").replace(" "+t,""))},$:function(e,t){return(t||document).querySelector(e)},$$:function(e,t){return this.toArray((t||document).querySelectorAll(e))}};return{to:e,updated:p,updatedMultiple:c}}();"undefined"!=typeof module&&module.exports&&(module.exports=pickout);